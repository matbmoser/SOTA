Starting Server Log Messages...
[INFO]: You are [www-data]
[INFO]: Trying to start server...
[STATS]: [1] elements inserted in [0:00:00.030164] DBManager.operationQuery()
[INFO]: Server [35b5fd600f9a] added into DB!
[INFO]: NEW SERVER CREATED!: serverid=[35b5fd600f9a], ip=[127.0.0.1], port=[4072], poll_interval=[0.5]. [Server [35b5fd600f9a] in socket [0.0.0.0:4072] status [RUNNING] in thread: [35b5fd600f9a]].
[INFO]: Server is Opened in Background
[DEBUG]: [NEW] RAW Connection Data Received: [GET / HTTP/1.1
Host: 127.0.0.1:4072
Connection: Upgrade
Pragma: no-cache
Cache-Control: no-cache
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.54 Safari/537.36
Upgrade: websocket
Origin: http://localhost:3333
Sec-WebSocket-Version: 13
Accept-Encoding: gzip, deflate, br
Accept-Language: es-ES,es;q=0.9
Sec-WebSocket-Key: ih6yXpDwLS5LitG5WjO1iQ==
Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
Sec-WebSocket-Protocol: SJMP, %7B'clt-time'%3A%20'1651845368446'%2C%20'cameraid'%3A%20'3d22d890-6ac1-4edc-9adf-d1757f0d499c'%2C%20'flag'%3A%20'SYN'%2C%20'type'%3A%20'BOTH'%7D

]
[DEBUG]: Incoming [camera.WebSocketSJMPCamera.WebSocketSJMPCamera] Protocol Connection...
[DEBUG]: Camera [3d22d890-6ac1-4edc-9adf-d1757f0d499c], status [ONLINE] on [172.23.0.1:53480] logged in with sessionid = [c6e61fbf7ac6ebef8d4ae3aa3f02e1ed] protocol [<class 'protocols.WebSocketSJMPProtocol.WebSocketSJMPProtocol'>] type [BOTH] 
[DEBUG]: [35b5fd600f9a]-[0.0.0.0:4072] BaseRequestHandler.setup().
[DEBUG]: [35b5fd600f9a]-[0.0.0.0:4072] > Received one request from 3d22d890-6ac1-4edc-9adf-d1757f0d499c
[STATS]: Messages Processed: nmessages=[1];duration=[0:00:00.008182]
[DEBUG]: WebSocketMessage.getHeaders(): Incomming WS Message type [text].
[DEBUG]: WebSocketMessage.parseMessage(): WS Payload received LEN = [113]
[DEBUG]: {'id': 11, 'matricula': '1234-QWE', 'numAparcamientos': 0, 'ultimoAparcamiento': None, 'idTipoVehiculo': 3, 'idUsuario': 5, 'created_at': datetime.datetime(2022, 5, 6, 13, 37, 35), 'updated_at': datetime.datetime(2022, 5, 6, 13, 37, 35)}
[DEBUG]: {'id': 11, 'matricula': '1234-QWE', 'numAparcamientos': 0, 'ultimoAparcamiento': None, 'idTipoVehiculo': 3, 'idUsuario': 5, 'created_at': datetime.datetime(2022, 5, 6, 13, 37, 35), 'updated_at': datetime.datetime(2022, 5, 6, 13, 37, 35)}
[STATS]: [1] elements update in [0:00:00.021341] DBManager.operationQuery()
[STATS]: [1] elements inserted in [0:00:00.013195] DBManager.operationQuery()
[STATS]: Messages Processed: nmessages=[1];duration=[0:00:00.546077]
[DEBUG]: WebSocketMessage.getHeaders(): Incomming WS Message type [close].
[DEBUG]: WebSocketMessage.parseMessage(): WS Payload received LEN = [0]
[INFO]: Connection with [3d22d890-6ac1-4edc-9adf-d1757f0d499c] is Closed
[WARNING]: Something went wrong! BaseCamera.addInputBuffer()
[CRITICAL]: Was not posible to process rawdata. BaseProtocol.loadRequest()
[STATS]: Messages Processed: nmessages=[1];duration=[0:00:00.101178]
[DEBUG]: [NEW] RAW Connection Data Received: [GET / HTTP/1.1
Host: 127.0.0.1:4072
Connection: Upgrade
Pragma: no-cache
Cache-Control: no-cache
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.54 Safari/537.36
Upgrade: websocket
Origin: http://localhost:3333
Sec-WebSocket-Version: 13
Accept-Encoding: gzip, deflate, br
Accept-Language: es-ES,es;q=0.9
Sec-WebSocket-Key: lY0oTeqkc/TL8HE8PiTR1Q==
Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
Sec-WebSocket-Protocol: SJMP, %7B'clt-time'%3A%20'1651845398444'%2C%20'cameraid'%3A%20'c1b96179-3b38-4021-b540-b79a97c720c5'%2C%20'flag'%3A%20'SYN'%2C%20'type'%3A%20'BOTH'%7D

]
[DEBUG]: Incoming [camera.WebSocketSJMPCamera.WebSocketSJMPCamera] Protocol Connection...
[DEBUG]: Camera [c1b96179-3b38-4021-b540-b79a97c720c5], status [ONLINE] on [172.23.0.1:53484] logged in with sessionid = [410b9297bb63c5a48e98a286597667f4] protocol [<class 'protocols.WebSocketSJMPProtocol.WebSocketSJMPProtocol'>] type [BOTH] 
[DEBUG]: [35b5fd600f9a]-[0.0.0.0:4072] BaseRequestHandler.setup().
[DEBUG]: [35b5fd600f9a]-[0.0.0.0:4072] > Received one request from c1b96179-3b38-4021-b540-b79a97c720c5
[STATS]: Messages Processed: nmessages=[1];duration=[0:00:00.002318]
[DEBUG]: WebSocketMessage.getHeaders(): Incomming WS Message type [text].
[DEBUG]: WebSocketMessage.parseMessage(): WS Payload received LEN = [114]
[DEBUG]: {'id': 11, 'matricula': '1234-QWE', 'numAparcamientos': 1, 'ultimoAparcamiento': datetime.datetime(2022, 5, 6, 13, 56, 12), 'idTipoVehiculo': 3, 'idUsuario': 5, 'created_at': datetime.datetime(2022, 5, 6, 13, 37, 35), 'updated_at': datetime.datetime(2022, 5, 6, 13, 37, 35)}
[DEBUG]: {'id': 11, 'matricula': '1234-QWE', 'numAparcamientos': 1, 'ultimoAparcamiento': datetime.datetime(2022, 5, 6, 13, 56, 12), 'idTipoVehiculo': 3, 'idUsuario': 5, 'created_at': datetime.datetime(2022, 5, 6, 13, 37, 35), 'updated_at': datetime.datetime(2022, 5, 6, 13, 37, 35)}
[DEBUG]: {'id': 4, 'fechaEntrada': datetime.datetime(2022, 5, 6, 13, 56, 12), 'fechaSalida': None, 'valido': 1, 'incidencia': 0, 'idZona': 9, 'idVehiculo': 11, 'token': '369e423a988876974cca80866ef705139ee747d82064e89018116b73faad2d971ec7d9cded9b24201431fff48543565bef45e22913390fc135463447826d89d3', 'created_at': datetime.datetime(2022, 5, 6, 13, 56, 12), 'updated_at': datetime.datetime(2022, 5, 6, 13, 56, 12)}
[DEBUG]: {'id': 9, 'letra': 'I', 'plazas': 23, 'idTipoPlaza': 1, 'idAparcamiento': 1, 'created_at': datetime.datetime(2022, 5, 6, 12, 55, 57), 'updated_at': datetime.datetime(2022, 5, 6, 12, 55, 57)}
[STATS]: [1] elements update in [0:00:00.016973] DBManager.operationQuery()
[STATS]: Messages Processed: nmessages=[1];duration=[0:00:00.307087]
[DEBUG]: WebSocketMessage.getHeaders(): Incomming WS Message type [text].
[DEBUG]: WebSocketMessage.parseMessage(): WS Payload received LEN = [114]
[DEBUG]: {'id': 11, 'matricula': '1234-QWE', 'numAparcamientos': 1, 'ultimoAparcamiento': datetime.datetime(2022, 5, 6, 13, 56, 12), 'idTipoVehiculo': 3, 'idUsuario': 5, 'created_at': datetime.datetime(2022, 5, 6, 13, 37, 35), 'updated_at': datetime.datetime(2022, 5, 6, 13, 37, 35)}
[DEBUG]: {'id': 11, 'matricula': '1234-QWE', 'numAparcamientos': 1, 'ultimoAparcamiento': datetime.datetime(2022, 5, 6, 13, 56, 12), 'idTipoVehiculo': 3, 'idUsuario': 5, 'created_at': datetime.datetime(2022, 5, 6, 13, 37, 35), 'updated_at': datetime.datetime(2022, 5, 6, 13, 37, 35)}
[DEBUG]: {'id': 4, 'fechaEntrada': datetime.datetime(2022, 5, 6, 13, 56, 12), 'fechaSalida': datetime.datetime(2022, 5, 6, 13, 56, 42), 'valido': 0, 'incidencia': 0, 'idZona': 9, 'idVehiculo': 11, 'token': '369e423a988876974cca80866ef705139ee747d82064e89018116b73faad2d971ec7d9cded9b24201431fff48543565bef45e22913390fc135463447826d89d3', 'created_at': datetime.datetime(2022, 5, 6, 13, 56, 12), 'updated_at': datetime.datetime(2022, 5, 6, 13, 56, 42)}
[DEBUG]: {'id': 9, 'letra': 'I', 'plazas': 23, 'idTipoPlaza': 1, 'idAparcamiento': 1, 'created_at': datetime.datetime(2022, 5, 6, 12, 55, 57), 'updated_at': datetime.datetime(2022, 5, 6, 12, 55, 57)}
[ERROR]: SJMPHandler.processINFlag(matricula=[1234-QWE]) The vehicle with plate [1234-QWE] is already parked in [I4] 
[STATS]: Messages Processed: nmessages=[1];duration=[0:00:00.141031]
[DEBUG]: WebSocketMessage.getHeaders(): Incomming WS Message type [close].
[DEBUG]: WebSocketMessage.parseMessage(): WS Payload received LEN = [2]
[INFO]: Connection with [c1b96179-3b38-4021-b540-b79a97c720c5] is Closed
[WARNING]: Something went wrong! BaseCamera.addInputBuffer()
[CRITICAL]: Was not posible to process rawdata. BaseProtocol.loadRequest()
[STATS]: Messages Processed: nmessages=[1];duration=[0:00:00.033082]
[DEBUG]: [NEW] RAW Connection Data Received: [GET / HTTP/1.1
Host: 127.0.0.1:4072
Connection: Upgrade
Pragma: no-cache
Cache-Control: no-cache
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.54 Safari/537.36
Upgrade: websocket
Origin: http://localhost:3333
Sec-WebSocket-Version: 13
Accept-Encoding: gzip, deflate, br
Accept-Language: es-ES,es;q=0.9
Sec-WebSocket-Key: AYl++Tllo83MlxdsSnPLfA==
Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
Sec-WebSocket-Protocol: SJMP, %7B'clt-time'%3A%20'1651845413935'%2C%20'cameraid'%3A%20'c1b96179-3b38-4021-b540-b79a97c720c5'%2C%20'flag'%3A%20'SYN'%2C%20'type'%3A%20'BOTH'%7D

]
[DEBUG]: Incoming [camera.WebSocketSJMPCamera.WebSocketSJMPCamera] Protocol Connection...
[DEBUG]: Camera [c1b96179-3b38-4021-b540-b79a97c720c5], status [ONLINE] on [172.23.0.1:53502] logged in with sessionid = [4c12a8350fa2fc92c1d8a9fd11e02045] protocol [<class 'protocols.WebSocketSJMPProtocol.WebSocketSJMPProtocol'>] type [BOTH] 
[DEBUG]: [35b5fd600f9a]-[0.0.0.0:4072] BaseRequestHandler.setup().
[DEBUG]: [35b5fd600f9a]-[0.0.0.0:4072] > Received one request from c1b96179-3b38-4021-b540-b79a97c720c5
[STATS]: Messages Processed: nmessages=[1];duration=[0:00:00.000639]
[DEBUG]: WebSocketMessage.getHeaders(): Incomming WS Message type [text].
[DEBUG]: WebSocketMessage.parseMessage(): WS Payload received LEN = [113]
[DEBUG]: {'id': 11, 'matricula': '1234-QWE', 'numAparcamientos': 1, 'ultimoAparcamiento': datetime.datetime(2022, 5, 6, 13, 56, 12), 'idTipoVehiculo': 3, 'idUsuario': 5, 'created_at': datetime.datetime(2022, 5, 6, 13, 37, 35), 'updated_at': datetime.datetime(2022, 5, 6, 13, 37, 35)}
[DEBUG]: {'id': 11, 'matricula': '1234-QWE', 'numAparcamientos': 1, 'ultimoAparcamiento': datetime.datetime(2022, 5, 6, 13, 56, 12), 'idTipoVehiculo': 3, 'idUsuario': 5, 'created_at': datetime.datetime(2022, 5, 6, 13, 37, 35), 'updated_at': datetime.datetime(2022, 5, 6, 13, 37, 35)}
[DEBUG]: {'id': 4, 'fechaEntrada': datetime.datetime(2022, 5, 6, 13, 56, 12), 'fechaSalida': datetime.datetime(2022, 5, 6, 13, 56, 42), 'valido': 0, 'incidencia': 0, 'idZona': 9, 'idVehiculo': 11, 'token': '369e423a988876974cca80866ef705139ee747d82064e89018116b73faad2d971ec7d9cded9b24201431fff48543565bef45e22913390fc135463447826d89d3', 'created_at': datetime.datetime(2022, 5, 6, 13, 56, 12), 'updated_at': datetime.datetime(2022, 5, 6, 13, 56, 42)}
[DEBUG]: {'id': 9, 'letra': 'I', 'plazas': 23, 'idTipoPlaza': 1, 'idAparcamiento': 1, 'created_at': datetime.datetime(2022, 5, 6, 12, 55, 57), 'updated_at': datetime.datetime(2022, 5, 6, 12, 55, 57)}
[INFO]: SJMPHandler.processINFlag(matricula=[1234-QWE]) Deleting old ticket from vehicle with plate [1234-QWE], ticketToken=[369e423a988876974cca80866ef705139ee747d82064e89018116b73faad2d971ec7d9cded9b24201431fff48543565bef45e22913390fc135463447826d89d3] oldPlaza=[I4] 
[STATS]: [0] elements deleted in [0:00:00.001690] DBManager.operationQuery()
[STATS]: [0] elements update in [0:00:00.001074] DBManager.operationQuery()
[CRITICAL]:[1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`sotadb`.`plaza`, CONSTRAINT `plaza_idvehiculo_foreign` FOREIGN KEY (`idVehiculo`) REFERENCES `vehiculo` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)]. DBManager.operationQuery(INSERT INTO Plaza (`id`, `fechaEntrada`, `valido`, `incidencia`, `idZona`, `idVehiculo`, `token`, `created_at`, `updated_at`) VALUES (2, '2022-05-06 13:58:22.319729', 1, 0, 1, 11, '304d044e22e6b0ce22d9f6dbd2723ef3b332db4689f41cbcc2b0a9abcfb83025d1bcd5133538364cb7546693d68a54ea1c06500a56b93e19619ebc13f2f13ee0', '2022-05-06 13:58:22.319729', '2022-05-06 13:58:22.319729'))
[ERROR]: SJMPHandler.processINFlag(matricula=[1234-QWE]) Was not posible to generate ticket for vehicle [1234-QWE]!
[STATS]: Messages Processed: nmessages=[1];duration=[0:00:00.498532]
[DEBUG]: WebSocketMessage.getHeaders(): Incomming WS Message type [close].
[DEBUG]: WebSocketMessage.parseMessage(): WS Payload received LEN = [2]
[INFO]: Connection with [c1b96179-3b38-4021-b540-b79a97c720c5] is Closed
[WARNING]: Something went wrong! BaseCamera.addInputBuffer()
[CRITICAL]: Was not posible to process rawdata. BaseProtocol.loadRequest()
[STATS]: Messages Processed: nmessages=[1];duration=[0:00:00.029471]
[DEBUG]: [NEW] RAW Connection Data Received: [GET / HTTP/1.1
Host: 127.0.0.1:4072
Connection: Upgrade
Pragma: no-cache
Cache-Control: no-cache
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.54 Safari/537.36
Upgrade: websocket
Origin: http://localhost:3333
Sec-WebSocket-Version: 13
Accept-Encoding: gzip, deflate, br
Accept-Language: es-ES,es;q=0.9
Sec-WebSocket-Key: EmIyZN7MtTc+vYPfAlg3uQ==
Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
Sec-WebSocket-Protocol: SJMP, %7B'clt-time'%3A%20'1651845507710'%2C%20'cameraid'%3A%20'c1b96179-3b38-4021-b540-b79a97c720c5'%2C%20'flag'%3A%20'SYN'%2C%20'type'%3A%20'BOTH'%7D

]
[DEBUG]: Incoming [camera.WebSocketSJMPCamera.WebSocketSJMPCamera] Protocol Connection...
[DEBUG]: Camera [c1b96179-3b38-4021-b540-b79a97c720c5], status [ONLINE] on [172.23.0.1:53562] logged in with sessionid = [559fccd0029b75944907bde6ae680205] protocol [<class 'protocols.WebSocketSJMPProtocol.WebSocketSJMPProtocol'>] type [BOTH] 
[DEBUG]: [35b5fd600f9a]-[0.0.0.0:4072] BaseRequestHandler.setup().
[DEBUG]: [35b5fd600f9a]-[0.0.0.0:4072] > Received one request from c1b96179-3b38-4021-b540-b79a97c720c5
[STATS]: Messages Processed: nmessages=[1];duration=[0:00:00.000447]
[DEBUG]: WebSocketMessage.getHeaders(): Incomming WS Message type [text].
[DEBUG]: WebSocketMessage.parseMessage(): WS Payload received LEN = [113]
[DEBUG]: {'id': 12, 'matricula': '1234-QWE', 'numAparcamientos': 0, 'ultimoAparcamiento': None, 'idTipoVehiculo': 2, 'idUsuario': 5, 'created_at': datetime.datetime(2022, 5, 6, 13, 58, 14), 'updated_at': datetime.datetime(2022, 5, 6, 13, 58, 14)}
[DEBUG]: {'id': 12, 'matricula': '1234-QWE', 'numAparcamientos': 0, 'ultimoAparcamiento': None, 'idTipoVehiculo': 2, 'idUsuario': 5, 'created_at': datetime.datetime(2022, 5, 6, 13, 58, 14), 'updated_at': datetime.datetime(2022, 5, 6, 13, 58, 14)}
[STATS]: [1] elements update in [0:00:00.008374] DBManager.operationQuery()
[STATS]: [1] elements inserted in [0:00:00.006677] DBManager.operationQuery()
[STATS]: Messages Processed: nmessages=[1];duration=[0:00:00.330591]
[DEBUG]: WebSocketMessage.getHeaders(): Incomming WS Message type [text].
[DEBUG]: WebSocketMessage.parseMessage(): WS Payload received LEN = [114]
[DEBUG]: {'id': 12, 'matricula': '1234-QWE', 'numAparcamientos': 1, 'ultimoAparcamiento': datetime.datetime(2022, 5, 6, 13, 59, 1), 'idTipoVehiculo': 2, 'idUsuario': 5, 'created_at': datetime.datetime(2022, 5, 6, 13, 58, 14), 'updated_at': datetime.datetime(2022, 5, 6, 13, 58, 14)}
[DEBUG]: {'id': 12, 'matricula': '1234-QWE', 'numAparcamientos': 1, 'ultimoAparcamiento': datetime.datetime(2022, 5, 6, 13, 59, 1), 'idTipoVehiculo': 2, 'idUsuario': 5, 'created_at': datetime.datetime(2022, 5, 6, 13, 58, 14), 'updated_at': datetime.datetime(2022, 5, 6, 13, 58, 14)}
[DEBUG]: {'id': 16, 'fechaEntrada': datetime.datetime(2022, 5, 6, 13, 59, 1), 'fechaSalida': None, 'valido': 1, 'incidencia': 0, 'idZona': 6, 'idVehiculo': 12, 'token': 'bd36ec2fdd39133cff091bd0dae5f029d09fc084b6137940604eb10825a7b5c4342ca4b526b5e27f525386f02f3016b13e508b21b01ea9dead356cdcd1f2801c', 'created_at': datetime.datetime(2022, 5, 6, 13, 59, 1), 'updated_at': datetime.datetime(2022, 5, 6, 13, 59, 1)}
[DEBUG]: {'id': 6, 'letra': 'F', 'plazas': 21, 'idTipoPlaza': 1, 'idAparcamiento': 1, 'created_at': datetime.datetime(2022, 5, 6, 12, 55, 57), 'updated_at': datetime.datetime(2022, 5, 6, 12, 55, 57)}
[STATS]: [1] elements update in [0:00:00.007124] DBManager.operationQuery()
[STATS]: Messages Processed: nmessages=[1];duration=[0:00:00.227555]
